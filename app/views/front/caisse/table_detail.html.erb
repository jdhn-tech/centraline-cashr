<div id="table_detail" class="content">
	<table id='Table_Detail' class='table'>
	<thead>
		<tr>
			<th colspan="2" rowspan="2"><img src="/assets/table1.png" onclick="toggleTableDetail()"></th>
			<th colspan="5">N° Table : <%=@table.table_number.to_s.rjust(2,'0')%></th>
		</tr>
		<tr>
			<th>Code</th>
			<th>Nom</th>
			<th>Prix Unité</th>
			<th>Note</th>
			<th>Etat</th>
		</tr>
	</thead>
	
	<tbody id='table_detail_note'>
		
	</tbody>
	<tfoot>
		<tr>
			<th colspan="7" id="table_note_sum">SUM=0 €</th>
		</tr>
	</tfoot>
	</table>
	
	<table id='Table_Bottom' class='Table_Bottom'>
	<tr>
	<td><a href="/front/edition_liste">Edition liste</a></td><td><a href="/front/edition_client">Edition Client</a></td><td><a href="/front/encaisser">Encaisser</a></td><td><a href="/front/annulation">Annulation</a></td>
	</tr>
	</table>
</div>

<%= render "table_book" %>

<script >
$(document).ready(function() {
	var table_detail_line = "<tr><td><button type='button' class='add btn btn-default btn-lg'>%QUANTITE%</button></td><td><button type='button' class='del btn btn-default btn-lg'><span class='glyphicon glyphicon-trash' aria-hidden='true'></span></button></td><td>%CODE%</td><td>%NOM%</td><td>%PRIX%</td><td>%NOTE%</td><td>%ETAT%</td></tr>";
	var tableNote = {
		'menu1' : 'data menu1',
		'menu2' : 'data menu2',
		'article1' : 'data menu3'
	};
	var tableKeys = Object.keys(tableNote);
	tableKeys.forEach(function(element) {
		console.log(tableNote[element]);
	});
});

function addElementToTableNote() {

}

function updateNote() {

}

function toggleTableDetail() {
	if ($("#table_detail").is(":visible")) {
		$("#table_detail").hide();
		$("#table_book").show();
	} else {
		$("#table_detail").show();
		$("#table_book").hide();
	}
}
$('.add').on('click', function(){
  var count = $(this).text();
  count++;
  $(this).text(count);
});
$('.del').on('click', function(){
  var count = $(this).parent().parent().find('td:eq(0)').text();
  if (count > 1){ 
	count--; 
	$(this).parent().parent().find('td:eq(0)').children().text(count);
  } else{
	$(this).parent().parent().remove();
  }
});
</script>